{% extends 'equimolar/base.html' %}
{% block meta %}
    {% include "equimolar/metatags.html" %}
{% endblock meta %}
{% block title %}
    {{ article.title }}
{% endblock %}
{% block main %}
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for msg in messages %}
            <p>{{ msg }}</p>
        {% endfor %}
    {% endif %}
    {% endwith %}
    <h1>{{ article.title }}</h1>
    <p>{{ article.summary }}
    {% if can_edit(current_user, article.authour.first().username) %}
        <a href="{{ url_for('equimolar_blog.writter', article_id=article.id) }}">
            <i class='material-icons'>edit</i>
        </a>
    {% endif %}
    </p>
    <hr>
    {{ article.html_content }}

    {% if article.last_mod_date %}
        <p>
            Last modified on {{ blog_date(article.last_mod_date) }} by 
            {{ article.authour.first().username }}
        </p>
    {% endif %}

{% endblock %}
{% block sidebar %}
    {% if article.tags %}
        {% for tag in article.tags %}
            <button class="btn btn-dark mt-2"><a href="/tag/{{ tag.name }}">
                <span class="row h-100 align-items-center px-2">
                    <i class="material-icons">local_offer</i>
                    {{ tag.name }}
                </span></a>
            </button>
        {% endfor %}
    {% endif %}
    {% if related_articles %}
        <br>
        <p>Related Posts</p>
        {% for related in related_articles %}
            {% if related.title != article.title %}
                <li><a href="/{{ related.slug }}">{{ related.title }}
                </a></li>
            {% endif %}
        {% endfor %}
    {% endif %}
{% endblock %}
